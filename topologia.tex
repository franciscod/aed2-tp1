\begin{tadx}{\tadNombre{Topología}}{
	\noindent Este TAD modela cómo se conectan las computadoras.
	Las IP son únicas entre compus de la topología.
	Las compus tienen interfaces numeradas con los naturales de manera consecutiva
	(todas funcionan perfecto y todo eso, el DC las cuida y mantiene como corresponde).
}

	\tadGeneros{topologia}

	\tadAlinearFunciones{todasLasConectadas}{topologia/t, nat/ipA, nat/ipB}

	\tadGeneradores
	\tadOperacion{NuevaTopo}{}{topologia}{}
	\tadOperacion{Compu}{topologia, nat, nat}{topologia}{}
	\tadOperacion{Cable}{topologia, nat, nat, nat, nat}{topologia}{} % falta restringir cables repetidos (y simetricos) y entre compus que no existen

	\tadObservadores
	\tadOperacion{compus}{topologia}{conj(nat)}{}
	\tadOperacion{vecinas}{topologia/t, nat/ip}{conj(nat)}{$ip \in compus(t)$}
	\tadOperacion{cables}{topologia/t, nat/ip}{conj(tupla(nat, nat))}{$ip \in compus(t)$}

	\tadOtrasOperaciones
	\tadOperacion{seAlcanzan?}{topologia/t, nat/ipA, nat/ipB}{bool}{$ipA \in compus(t) $ $\land$ $ipB \in compus(t)$}
	\tadOperacion{todasLasQueAlcanza}{topologia/t, nat/ip}{conj(nat)}{$ip \in compus(t)$}
	\tadOperacion{expandirFull}{topologia/t, conj(nat)/cs}{conj(nat)}{$cs \subseteq compus(t)$}
	\tadOperacion{exp1}{topologia/t, conj(nat)/cs}{conj(nat)}{$cs \subseteq compus(t)$}

	\tadAlinearAxiomas{vecinas(Cable($t$, $ipA$, $ifA$, $ipB$, $ifB$), $ipBus$)}

	\tadAxiomas[\paratodo{topologia}{t}, \paratodo{nat}{ip, ipBus, ipA, ipB, ifA, ifB, numIfaces}]

	\tadAxioma{compus(NuevaTopo)}{$\emptyset$}
	\tadAxioma{compus(Compu($t$, $ip$, $numIfaces$))}{Ag($ip$, compus($t$))}
	\tadAxioma{compus(Cable($t$, $ipA$, $ifA$, $ipB$, $ifB$))}{compus($t$)}

	\tadAxioma{vecinas(NuevaTopo, $ipBus$)}{$\emptyset$}
	\tadAxioma{vecinas(Compu($t$, $ip$, $numIfaces$), $ipBus$)}{vecinas($t$, $ipBus$)}
	\tadAxioma{vecinas(Cable($t$, $ipA$, $ifA$, $ipB$, $ifB$), $ipBus$)}{
		\IF $ipBus$ = $ipA$ THEN Ag($ipB$, $\emptyset$) ELSE $\emptyset$ FI $\cup$ \\
		\IF $ipBus$ = $ipB$ THEN Ag($ipA$, $\emptyset$) ELSE $\emptyset$ FI	$\cup$ \\
		vecinas($t$, $ipBus$)
	}

	\tadAxioma{cables(NuevaTopo, $ipBus$)}{$\emptyset$}
	\tadAxioma{cables(Compu($t$, $ip$, $numIfaces$), $ipBus$)}{cables($t$, $ipBus$)}
	\tadAxioma{cables(Cable($t$, $ipA$, $ifA$, $ipB$, $ifB$), $ipBus$)}{
		\IF $ipBus$ = $ipA$ THEN Ag($\langle$ $ifA$, $ipB$ $\rangle$, $\emptyset$) ELSE $\emptyset$ FI $\cup$ \\
		\IF $ipBus$ = $ipB$ THEN Ag($\langle$ $ifB$, $ipA$ $\rangle$, $\emptyset$) ELSE $\emptyset$ FI $\cup$ \\
		cables($t$, $ipBus$)
	}

	\tadAxioma{seAlcanzan?($t$, $ipA$, $ipB$)}{$ipA$ $\in$ todasLasQueAlcanza($t$, $ipB$)}

	\tadAxioma{todasLasQueAlcanza($t$, $ip$)}{expandirFull($t$, Ag($ip$, $\emptyset$))}

	\tadAxioma{expandirFull($t$, $cs$)}{
		\IF exp1($t$, $cs$) $\subseteq$ $cs$ THEN
			$cs$
		ELSE
			expandirFull($t$, exp1($t$, $cs$))
		FI
	}

	\tadAxioma{exp1($t$, $cs$)}{
		\IF $\emptyset$?($cs$) THEN
			$\emptyset$
		ELSE
			Ag(dameUno($cs$), vecinas($t$, dameUno($cs$))) $\cup$ exp1($t$, sinUno($cs$))
		FI
	}




\end{tadx}
