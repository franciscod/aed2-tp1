\begin{tad}{\tadNombre{DCNet}}
	\tadGeneros{dcnet}

	\tadAlinearFunciones{buscarPaquetesEnLaRed}{dcnet/dcn,pc/p1,pc/p2,paquete}
	\tadIgualdadObservacional{d}{d'}{dcnet}{
		(topo($d$) \igobs topo($d'$)) \yluego ( \\
			\- ($\forall p: pc$)($p$ $\in$ compus($d$) ) \impluego ( \\
			\- \- \- \- (buffer($d$,$p$) \igobs buffer($d'$, $p$)) $\land$ \\
			\- \- \- \- (\#enviados($d$, $p$) \igobs \#enviados($d'$, $p$)) \\
		))
	}
	\tadGeneradores
	\tadOperacion{CrearRed}{topo}{dcnet}{}
	\tadOperacion{Seg}{dcnet}{dcnet}{}
	\tadOperacion{CrearPaquete}{dcnet/dcn, paquete/p}{dcnet}
	{$(\pi_2(p) \in compus(dcn) \land  \pi_3(p) \in compus(dcn)) \yluego  conectadas?(topo(dcn) , \pi_2(p) , \pi_3(p)$}

	\tadObservadores

	\tadOperacion{topo}{dcnet}{topologia}{}
	\tadOperacion{$\#$enviados}{dcnet/dcn, pc/ip}{nat}{ip $\in$ compus(dcn)}
	\tadOperacion{buffer}{dcnet/dcn, pc/ip}{conj(paquete)}{ip $\in$ compus(dcn)}


	\tadOtrasOperaciones

	\tadOperacion{recorridoPaquete}{dcnet/dcn,nat/id}{secu(segmento))}{paqueteEnTransito?(dcn, id)}
	\tadOperacion{cortarRecHasta}{sec(segmento), pc}{sec(segmento)}{}

	\tadOperacion{buscarPaquete}{dcnet/dcn, conj(pc)/pcs, nat/id}{pc}{pcs $\subseteq$ compus(topo(dcn)) $\land$ paqueteEnTransito?(dcn, id)}
	\tadOperacion{ids}{{conj(paquete)}}{conj(nat))}{}

	\tadOperacion{paqueteEnTransito?}{dcnet, nat}{bool}{}

	\tadOperacion{darPaqueteEnviado}{conj(paquete)}{paquete}{}
	\tadOperacion{rutaPaqueteEnviado}{dcnet/dcn, pc/compu}{secu(segmento)}{$compu \in compus(topo(dcn)$}
	\tadOperacion{paquetesRecibidos}{dcnet, conj(pc)/vecinasPc, pc/compu}{conj(paquete)}{$compu \in compus(topo(dcn)) \yluego vecinasPc \subseteq vecinas(topo(dcnet), compu)$}

	\tadOperacion{darPrioridad}{dcnet/dcn,nat/id}{nat}{paqueteEnTransito?(dcn, id)}
	\tadOperacion{buscarPrioridad}{nat,conj(paquetes)}{nat}{}
	\tadOperacion{maxPrioridad}{dcnet,conj(pc)}{nat}{}
	\tadOperacion{PaquetesConPrioridadK}{dcnet,conj(pc),nat}{conj(paquete)}{}


	\tadOperacion{paquetesEnLaRed}{dcnet}{conj(paquete)}{}
	\tadOperacion{buscarPaquetesEnLaRed}{dcnet, conj(pc))}{conj(paquete)}{}

	\tadOperacion{compuQueMasEnvio}{dcnet}{pc}{}
	\tadOperacion{maxEnviado}{dcnet,conj(pc)}{nat}{}
	\tadOperacion{enviaronK}{dcnet,conj(pc),nat}{conj(pc)}{}

	\tadOperacion{compus}{dcnet}{conj(pc)}{}

	\tadAlinearAxiomas{$\#$enviados(CrearPaquete(dcn, p), ip)}

	\tadAxiomas[\paratodo{paquete}{p,p'}, \paratodo{pc}{c, c'}, \paratodo{dcnet}{dcn, d}, \paratodo{topologia}{t}, \paratodo{conj(pc)}{vecinasPc}]

	\tadAxioma{topo(crearRed(t))}{t}
	\tadAxioma{topo(seg(dcn))}{topo(dcn)}
	\tadAxioma{topo(CrearPaquete(dcn, p))}{topo(dcn)}

	\tadAxioma{$\#$enviados(crearRed(t),ip)}{0}
	\tadAxioma{$\#$enviados(seg(dcn),ip)}{
		\IF $\emptyset$?(buffer(dcn, ip)) THEN $\#$enviados(dcn, ip) + 1 
		ELSE $\#$enviados(dcn, ip) 
		FI
	}
	\tadAxioma{$\#$enviados(CrearPaquete(dcn, p), ip)}{$\#$enviados(dcn, ip)}
	\tadAxioma{buffer(CrearRed($t$), $c$)}{$\emptyset$}
        \tadAxioma{buffer(CrearPaquete($dcn$, $p$), $c$)}{
            \IF $\pi_2$($p$) = $c$ THEN
                Ag($p$, $\emptyset$) $\cup$ buffer($dcn$, $c$)
            ELSE
                buffer($dcn$, $c$)
            FI
        }
	\tadAxioma{buffer(segundo($dcn$), $c$)}{
		(buffer($dcn$, $c$) - darPaqueteEnviado(buffer($dcn$, $c$))) $\cup$ \\
		paquetesRecibidos($dcn$, vecinas($c$), $c$)
	}

	\tadAxioma{recorridoPaquete(dcn, p)}{
		cortarRecHasta(darCaminoMasCorto(topo(dcn), \\origen(p), destino(p)), buscarPaquete(compus(dcn), p))
	}
	\tadAxioma{cortarRecHasta(s, ip)}{
		\IF vacia?(s) $\oluego$ ip = ipOrigen(prim(s)) THEN <> 		% ipOrigen es el primer elemento del segmento
		ELSE prim(s) \puntito cortarRecHasta(fin(s), ip)
		FI
	}
	\tadAxioma{buscarPaquete(dcn, pcs, id)}{
		\IF id $\in$ ids(buffer(dcn, dameUno(pcs))) THEN dameUno(pcs)
		ELSE buscarPaquete(dcn, sinUno(pcs), id)
		FI
	}
	\tadAxioma{ids($paquetes$)}{
		\IF $\emptyset$?($paquetes$) THEN
			$\emptyset$
		ELSE
			Ag($\pi_1$(dameUno($paquetes$)), ids(sinUno($paquetes$)))
		FI
	}

	\tadAxioma{paqueteEnTransito?(dcn, id)}{
		id $\in$ ids(paquetesEnLaRed(dcn))
	}
	

	\tadAxioma{buscarPaquetesEnLaRed(dcn,cc)}{\IF $\emptyset?(cc)$ THEN
													$\emptyset$
												ELSE
													$ buffer(dcn,dameUno(cc)) \cup buscarPaquetesEnLaRed(dcn,sinUno(cc))$
												FI}

	\tadAxioma{paquetesEnLaRed($d$)}{buscarPaquetesEnLaRed($d$, compus($d$))}

	\tadAxioma{buscarPrioridad($idPaq$, $cs$)}{\IF $idPaq$ = $\pi_1$(dameUno($cs$)) THEN $\pi_4$(dameUno($cs$)) ELSE buscarPrioridad($idPaq$, sinUno($cs$)) FI}

	\tadAxioma{darPrioridad($d$, $idPaq$)}{buscarPrioridad($idPaq$, compus($dcn$))}

	\tadAxioma{darPaqueteEnviado(dcn,cp)}{$dameUno(PaquetesConPrioridadK$
											$(dcn,cp,maxPrioridad(dcn,cp)))$}
	\tadAlinearAxiomas{paquetesRecibidos($dcn$, $vecinasPc$, $c$)}
	\tadAxioma{rutaPaqueteEnviado($dcn$, $c$)}{
		darCaminoMasCorto(topo($dcn$), \\ $\pi_2$(darPaqueteEnviado($dcn$, buffer($dcn$, $c$))), \\ $\pi_3$(darPaqueteEnviado($dcn$, buffer($dcn$, $c$))))
	}
	\tadAxioma{paquetesRecibidos($dcn$, $vecinasPc$, $c$)}{
		\IF darSiguientePc( \\ rutaPaqueteEnviado($dcn$, dameUno($vecinasPc$)), \\ dameUno($vecinasPc$)) = $c$ THEN
			Ag(darPaqueteEnviado($dcn$, \\ buffer($dcn$, dameUno($vecinasPc$))), $\emptyset$) $\cup$ \\
			paquetesRecibidos($dcn$, sinUno($vecinasPc$), $c$)
		ELSE
			paquetesRecibidos($dcn$, sinUno($vecinasPc$), $c$)
		FI
	}
	\tadAxioma{maxPrioridad(dcn,cp)}{\IF $\emptyset?(sinUno(cp))$ THEN
											$darPrioridad(dcn,dameUno(cp)$
										ELSE
											$max(darPrioridad(dcn,dameUno(cp),$
											$maxPrioridad(dcn,sinUno(cp)))$
										FI}

	\tadAxioma{PaquetesConPrioridadK(dcn,cp,k)}{	\IF $\emptyset?(cp)$ THEN
													$\emptyset$
												ELSE{\IF $ darPrioridad(dcn,dameUno(cp)) = k$ THEN
														$ Ag(dameUno(cp),PaquetesConPrioridadK$
														$(dcn,sinUno(cp),k))$
													ELSE
														$PaquetesConPrioridadK(dcn,sinUno(cp),k)$
													FI}
											FI}



	\tadAxioma{compuQueMasEnvio($dcn$)}{dameUno(enviaronK(dcn,compus(topo(dcn)) , \newline  
											maxEnviado(dcn,compus(topo(dcn))) ))}

	\tadAxioma{maxEnviado(dcn,cc)}{\IF $\emptyset?(sinUno(cc))$ THEN
											$\#enviados(dcn,dameUno(cc))$
										ELSE
											$max(\#enviados(dcn,dameUno(cc),$
											$maxEnviado(dcn,sinUno(cc)))$
										FI}

	\tadAxioma{enviaronK(dcn,cc,k)}{	\IF $\emptyset?(cc)$ THEN
													$\emptyset$
												ELSE{\IF $ \#enviados(dcn,dameUno(cc)) = k$ THEN
														$ Ag(dameUno(cc),enviaronK$
														$(dcn,sinUno(cc),k))$
													ELSE
														$enviaronK(dcn,sinUno(c),k)$
													FI}
											FI}




	\tadAxioma{perteneceBuffers?(p,bs)}{\IF $\emptyset?(claves(bs))$ THEN
											$false$
										ELSE { \IF $p \in obtener(dameUno(claves(bs)),bs)$ THEN
													$true$
												ELSE
													$perteneceBuffers?(p,borrar(dameUno(claves(bs)),bs))$
												FI
											}
										FI}

	\tadAxioma{compus($d$)}{compus(topo($d$))}
\end{tad}
