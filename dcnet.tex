\begin{tad}{\tadNombre{DCNet}}
	\tadGeneros{dcnet}

	\tadAlinearFunciones{buscarPaquetesEnLaRed}{dcnet/dcn,pc/p1,pc/p2,paquete}
	\tadIgualdadObservacional{d}{d'}{dcnet}{$ (topo(d) \igobs topo(d')) \land \newline
		((\forall p: pc)(p \in compus(topo(d)) \land   p \in compus(topo(d')) \impluego  \newline
		(buffer(d,p) \igobs buffer(d',p) \land
		\#paquetesEnviados(d,p) \newline \igobs \#paquetesEnviados(d',p) )\land $}
	\tadGeneradores
	\tadOperacion{CrearRed}{topo}{dcnet}{}
	\tadOperacion{Seg}{dcnet}{dcnet}{}
	\tadOperacion{CrearPaquete}{dcnet/dcn, paquete/p}{dcnet}
	{$(\pi_2(p) \in compus(topo(dcn)) \land  \pi_3(p) \in compus(topo(dcn))) \yluego  conectadas?(topo(dcn) , \pi_2(p) , \pi_3(p)$}

	\tadObservadores

	\tadOperacion{topo}{dcnet}{topologia}{}
	\tadOperacion{$\#$paquetesEnviados}{dcnet/dcn, pc/p}{nat}{$p$ $\in$ compus(topo($dcn$))}
	\tadOperacion{buffer}{dcnet/dcn, pc/p}{conj(paquete)}{$p \in compus(topo(dcn))$}


	\tadOtrasOperaciones

	\tadOperacion{recorridoPaquete}{dcnet/dcn,nat/id}{secu(tupla(nat, nat, nat, nat)))}{$(paqueteEnTransito?(dcn, id)$}
	\tadOperacion{cortarRecHasta}{sec(tupla(nat, nat, nat, nat)), nat}{sec(tupla(nat, nat, nat, nat))}{}

	\tadOperacion{buscarPaquete}{dcnet/dcn, conj(nat)/pcs, nat/id}{nat}{pcs = compus(topo(dcn)) $\land$ ($\exists$ ip : nat)(ip $\in$ pcs $\land$ id $\in$ buffer(dcn, ip))}
	\tadOperacion{$\Pi_1$Conj}{{conj(tupla(nat, nat, nat, nat))}}{conj(nat))}{}

	\tadOperacion{paqueteEnTransito?}{dcnet, nat}{bool}{}
	\tadOperacion{existePaqEnBuffers?}{dcnet/dcn, conj(nat)/pcs, nat/id}{bool}{pcs = compus(topo(dcn))}


	\tadOperacion{perteneceBuffers?}{paquete,buffers}{bool}{}


	\tadOperacion{darPaqueteEnviado}{conj(paquete)}{paquete}{}

	\tadOperacion{darPrioridad}{dcnet/dcn,nat/id}{nat}{$id \in paquetesEnLaRed(dcn)$ }
	\tadOperacion{buscarPrioridad}{nat,conj(paquetes)}{nat}{}
	\tadOperacion{maxPrioridad}{dcnet,conj(pc)}{nat}{}
	\tadOperacion{PaquetesConPrioridadK}{dcnet,conj(pc),nat}{paquete}{}


	\tadOperacion{paquetesEnLaRed}{dcnet)}{conj(paquete)}{}
	\tadOperacion{buscarPaquetesEnLaRed}{dcnet,conj(pc))}{conj(paquete)}{}

	\tadOperacion{compuQueMasEnvio}{dcnet}{pc}{}
	\tadOperacion{laQueMasEnvio}{dcnet,conj(pc)}{pc)}{}

	\tadAlinearAxiomas{$\#$paquetesEnviados(CrearPaquete(dcn, p), c)}

	\tadAxiomas[\paratodo{paquete}{p,p'},\paratodo{pc}{c, c'},\paratodo{dcnet}{dcn, d},\paratodo{topologia}{t}]

	\tadAxioma{topo(crearRed(t))}{t}
	\tadAxioma{topo(seg(dcn))}{topo(dcn)}
	\tadAxioma{topo(CrearPaquete(dcn, p))}{topo(dcn)}

	\tadAxioma{$\#$paquetesEnviados(crearRed(t),c)}{0}
	\tadAxioma{$\#$paquetesEnviados(seg(dcn),c)}{$\#$paquetesEnviados(dcn)}
	\tadAxioma{$\#$paquetesEnviados(CrearPaquete($dcn$, $p$), $c$)}{\#paquetesEnviados($dcn$, $c$) + \IF $c$ = $\pi_2$($p$) THEN 1 ELSE 0 FI}

	\tadAxioma{buffer(CrearRed($t$), $c$)}{$\emptyset$}
        \tadAxioma{buffer(CrearPaquete($dcn$, $p$), $c$)}{
            \IF $\pi_2$($p$) = $c$ THEN
                Ag($p$, $\emptyset$) $\cup$ buffer($dcn$, $c$)
            ELSE
                buffer($dcn$, $c$)
            FI
        }
	\tadAxioma{buffer(segundo($dcn$), $c$)}{
		(buffer($dcn$, $c$) - darPaqueteEnviado(buffer($dcn$, $c$))) $\cup$ \\
		paquetesRecibidos($dcn$, vecinas($c$), $c$)
	}

	\tadAxioma{recorridoPaquete(dcn, p)}{
		cortarRecHasta(darCaminoMasCorto(topo(dcn), \\origen(p), destino(p)), buscar(compus(topo(dcn)), p))
	}
	\tadAxioma{cortarRecHasta(s, ip)}{
		\IF vacia?(s) $\oluego$ ip = ipOrigen(prim(s)) THEN <> 		% ipOrigen es el primer elemento del segmento
		ELSE prim(s) \puntito cortarRecHasta(fin(s), ip)
		FI
	}
	\tadAxioma{buscarPaquete(dcn, compus, id)}{
		\IF id $\in$ $\Pi_1$Conj(buffer(dcn, dameUno(compus))) THEN dameUno(compus)
		ELSE buscarPaquete(sinUno(compus), id)
		FI
	}
	\tadAxioma{$\Pi_1$Conj($conjTuplas$)}{
		\IF $\emptyset$?($conjTuplas$) THEN
			$\emptyset$
		ELSE
			Ag($\Pi_1$(dameUno($conjTuplas$)), $\Pi_1$Conj(sinUno($conjTuplas$)))
		FI
	}

	\tadAxioma{paqueteEnTransito?(dcn, id)}{
		existePaqEnBuffers?(dcn, compus(topo(dcn)), id)
	}
	\tadAxioma{existePaqEnBuffers?(dcn, pcs, id)}{
		\IF $\emptyset$?(pcs) THEN false
		ELSE {
			\IF id $\in$ $\Pi_1$Conj(buffer(dcn, dameUno(pcs))) THEN true
			ELSE existePaqEnBuffers?(dcn, sinUno(pcs), id)
			FI
		}
		FI
	}


	\tadAxioma{buscarPaquetesEnLaRed(dcn,cc)}{\IF $\emptyset?(cc)$ THEN
													$\emptyset$
												ELSE
													$ buffer(dcn,dameUno(cc)) \cup buscarPaquetesEnLaRed(dcn,sinUno(cc))$
												FI}

	\tadAxioma{paquetesEnLaRed(dcn)}{$buscarPaquetesEnLaRed(dcn,compus(topo(dcn)))$}

	\tadAxioma{buscarPrioridad($idPaq$, $cs$)}{\IF $idPaq$ = $\Pi_1$(dameUno($cs$)) THEN $\Pi_4$(dameUno($cs$)) ELSE buscarPrioridad($idPaq$, sinUno($cs$)) FI}

	\tadAxioma{darPrioridad($d$, $idPaq$)}{buscarPrioridad($idPaq$, compus($dcn$))}

	\tadAxioma{darPaqueteEnviado(dcn,cp)}{$dameUno(PaquetesConPrioridadK$
											$(dcn,cp,maxPrioridad(dcn,cp)))$}
	\tadAxioma{maxPrioridad(dcn,cp)}{\IF $\emptyset?(sinUno(cp))$ THEN
											$darPrioridad(dcn,dameUno(cp)$
										ELSE
											$max(darPrioridad(dcn,dameUno(cp),$
											$maxPrioridad(dcn,sinUno(cp)))$
										FI}

	\tadAxioma{PaquetesConPrioridadK(dcn,cp,k)}{	\IF $\emptyset?(cp)$ THEN
													$\emptyset$
												ELSE{\IF $ darPrioridad(dcn,dameUno(cp)) = k$ THEN
														$ Ag(dameUno(cp),PaquetesConPrioridadK$
														$(dcn,sinUno(cp),k))$
													ELSE
														$PaquetesConPrioridadK(dcn,sinUno(cp),k)$
													FI}
											FI}



	\tadAxioma{compuQueMasEnvio(dcn)}{laQueMasEnvio(dcn,compus(topo(dcn)))}
	\tadAxioma{laQueMasEnvio(dcn,cs)}{\IF $\emptyset?(sinUno(cs))$ THEN
											$dameUno(cs)$
										ELSE { \IF $\#paquetesEnviados(dcn,dameUno(cs)<$
													$\#paquetesEnviados(dcn,laQueMasEnvio$
													$(dcn,sinUno(cs))) $ THEN
													$laQueMasEnvio(dcn,sinUno(cs))$
												ELSE
													$dameUno(cs)$
												FI}
										FI}


	\tadAxioma{perteneceBuffers?(p,bs)}{\IF $\emptyset?(claves(bs))$ THEN
											$false$
										ELSE { \IF $p \in obtener(dameUno(claves(bs)),bs)$ THEN
													$true$
												ELSE
													$perteneceBuffers?(p,borrar(dameUno(claves(bs)),bs))$
												FI
											}
										FI}
\end{tad}
