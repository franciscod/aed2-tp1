\begin{tad}{\tadNombre{DCNet}}
	\tadGeneros{dcnet}

	\tadAlinearFunciones{buscarPaquetesEnLaRed}{dcnet/dcn,pc/p1,pc/p2,paquete}
	\tadIgualdadObservacional{d}{d'}{dcnet}{
		(topo($d$) \igobs topo($d'$)) \yluego ( \\
			\- ($\forall p: pc$)($p$ $\in$ compus(topo($d$)) ) \impluego ( \\
			\- \- \- \- (buffer($d$,$p$) \igobs buffer($d'$, $p$)) $\land$ \\
			\- \- \- \- (\#enviados($d$, $p$) \igobs \#enviados($d'$, $p$)) \\
		))
	}
	\tadGeneradores
	\tadOperacion{CrearRed}{topo}{dcnet}{}
	\tadOperacion{Seg}{dcnet}{dcnet}{}
	\tadOperacion{CrearPaquete}{dcnet/dcn, paquete/p}{dcnet}{$(ipOrigen(p) \in compus(topo(dcn)) \land  ipDestino(p) \in compus(topo(dcn)) \yluego conectadas?(topo(dcn), ipOrigen(p), ipDestino(p))$}

	\tadObservadores

	\tadOperacion{topo}{dcnet}{topologia}{}
	\tadOperacion{\#enviados}{dcnet/dcn, pc/ip}{nat}{$ip \in compus(topo(dcn))$}
	\tadOperacion{buffer}{dcnet/dcn, pc/ip}{conj(paquete)}{$ip \in compus(topo(dcn))$}


	\tadOtrasOperaciones

	\tadOperacion{recorridoPaquete}{dcnet/dcn,nat/id}{secu(segmento)}{$paqueteEnTransito?(dcn, id)$}
	\tadOperacion{cortarRecHasta}{sec(segmento), pc}{sec(segmento)}{}

	\tadOperacion{buscarPaquete}{dcnet/dcn, conj(pc)/pcs, nat/id}{pc}{$pcs \subseteq compus(topo(dcn)) \land paqueteEnTransito?(dcn, id)$}
	\tadOperacion{ids}{{conj(paquete)}}{conj(nat)}{}

	\tadOperacion{paqueteEnTransito?}{dcnet, nat}{bool}{}

	\tadOperacion{darPaqueteEnviado}{conj(paquete)/cp}{paquete}{$\neg \emptyset?(cp)$}
	\tadOperacion{rutaPaqueteEnviado}{dcnet/dcn, pc/compu}{secu(segmento)}{$compu \in compus(topo(dcn)$}
	\tadOperacion{paquetesRecibidos}{dcnet, conj(pc)/vecinasPc, pc/compu}{conj(paquete)}{$compu \in compus(topo(dcn)) \yluego vecinasPc \subseteq vecinas(topo(dcnet), compu)$}

	\tadOperacion{darPrioridad}{dcnet/dcn,nat/id}{nat}{$paqueteEnTransito?(dcn, id)$}
	\tadOperacion{buscarPrioridad}{nat/k,conj(paquetes)/cp}{nat}{$\neg \emptyset?(cp) \land \exists(p \in cp) prioridad(p) = k$}
	\tadOperacion{maxPrioridad}{dcnet,conj(pc) c}{nat}{$\neg \emptyset?(cc) \land cc \subseteq compus(topo(dcn))$}
	\tadOperacion{paquetesConPrioridadK}{dcnet/dcn,conj(pc)/cc,nat/k}{conj(paquete)}{$cc \subseteq compus(topo(dcn))$}


	\tadOperacion{paquetesEnLaRed}{dcnet}{conj(paquete)}{}
	\tadOperacion{buscarPaquetesEnLaRed}{dcnet/dcn,conj(pc)/cc}{conj(paquete)}{$cc \subseteq compus(topo(dcn))$}


	\tadOperacion{compuQueMasEnvio}{dcnet/dcn}{pc}{$\neg \emptyset?(compus(topo(dcn)))$}
	\tadOperacion{maxEnviado}{dcnet/dcn,conj(pc)/cc }{nat}{$\neg \emptyset?(cc) \land cc \subseteq compus(topo(dcn))$}
	\tadOperacion{enviaronK}{dcnet/dcn,conj(pc)/cc,nat}{conj(pc)}{$cc  \subseteq compus(topo(dcn))$}

	\tadAlinearAxiomas{\#enviados(CrearPaquete(dcn, p), $ip$)}

	\tadAxiomas

	\tadAxioma{topo(crearRed($t$))}{$t$}
	\tadAxioma{topo(seg($dcn$))}{topo($dcn$)}
	\tadAxioma{topo(CrearPaquete($dcn$, $p$))}{topo($dcn$)}

	\tadAxioma{\#enviados(crearRed($t$), $ip$)}{0}
	\tadAxioma{\#enviados(seg($dcn$), $ip$)}{
		\#enviados($dcn$, $ip$) + \IF $\neg\emptyset$?(buffer($dcn$, $ip$)) THEN 1 ELSE 0 FI
	}
	\tadAxioma{\#enviados(CrearPaquete($dcn$, $p$), $ip$)}{\#enviados($dcn$, $ip$)}
	\tadAxioma{buffer(CrearRed($t$), $c$)}{$\emptyset$}
        \tadAxioma{buffer(CrearPaquete($dcn$, $p$), $c$)}{
            \IF ipOrigen($p$) = $c$ THEN
                Ag($p$, buffer($dcn$, $c$))
            ELSE
                buffer($dcn$, $c$)
            FI
        }
	\tadAxioma{buffer(segundo($dcn$), $c$)}{
		(buffer($dcn$, $c$) - darPaqueteEnviado(buffer($dcn$, $c$))) $\cup$ \\
		paquetesRecibidos($dcn$, vecinas($c$), $c$)
	}

	\tadAxioma{recorridoPaquete($dcn$, $p$)}{
		cortarRecHasta(darCaminoMasCorto(topo($dcn$), \\ipOrigen($p$), ipDestino($p$)), buscarPaquete(compus(topo($dcn$)), $p$))
	}
	\tadAxioma{cortarRecHasta($s$, $ip$)}{
		\IF vacia?($s$) $\oluego$ $ip$ = ipOrigen(prim($s$)) THEN <> 		% ipOrigen es el primer elemento del segmento
		ELSE prim($s$) \puntito cortarRecHasta(fin($s$), $ip$)
		FI
	}
	\tadAxioma{buscarPaquete($dcn$, $pcs$, $id$)}{
		\IF $id$ $\in$ ids(buffer($dcn$, dameUno($pcs$))) THEN dameUno($pcs$)
		ELSE buscarPaquete($dcn$, sinUno($pcs$), $id$)
		FI
	}
	\tadAxioma{ids($paquetes$)}{
		\IF $\emptyset$?($paquetes$) THEN
			$\emptyset$
		ELSE
			Ag(id(dameUno($paquetes$)), ids(sinUno($paquetes$)))
		FI
	}

	\tadAxioma{paqueteEnTransito?($dcn$, $id$)}{
		$id$ $\in$ ids(paquetesEnLaRed($dcn$))
	}


	\tadAxioma{buscarPaquetesEnLaRed($dcn$, $cc$)}{
		\IF $\emptyset$?($cc$) THEN
			$\emptyset$
		ELSE
			buffer($dcn$, dameUno($cc$)) $\cup$ \\ buscarPaquetesEnLaRed($dcn$, sinUno($cc$))
		FI
	}

	\tadAxioma{paquetesEnLaRed($d$)}{buscarPaquetesEnLaRed($d$, compus(topo($d$)))}

	\tadAxioma{buscarPrioridad($idPaq$, $cs$)}{
		\IF $idPaq$ = $\pi_1$(dameUno($cs$)) THEN
			$\pi_4$(dameUno($cs$))
		ELSE
			buscarPrioridad($idPaq$, sinUno($cs$))
		FI
	}

	\tadAxioma{darPrioridad($d$, $idPaq$)}{buscarPrioridad($idPaq$, compus(topo($dcn$)))}

	\tadAxioma{darPaqueteEnviado($dcn$, $cp$)}{dameUno(paquetesConPrioridadK
											($dcn$, $cp$, \\ maxPrioridad($dcn$, $cp$)))}
	\tadAlinearAxiomas{paquetesRecibidos($dcn$, $vecinasPc$, $c$)}
	\tadAxioma{rutaPaqueteEnviado($dcn$, $c$)}{
		darCaminoMasCorto(topo($dcn$), \\ ipOrigen(darPaqueteEnviado($dcn$, buffer($dcn$, $c$))), \\ ipDestino(darPaqueteEnviado($dcn$, buffer($dcn$, $c$))))
	}
	\tadAxioma{paquetesRecibidos($dcn$, $vecinasPc$, $c$)}{
		\IF darSiguientePc( \\ rutaPaqueteEnviado($dcn$, dameUno($vecinasPc$)), \\ dameUno($vecinasPc$)) = $c$ THEN
			Ag(darPaqueteEnviado($dcn$, \\ buffer($dcn$, dameUno($vecinasPc$))), $\emptyset$) $\cup$ \\
			paquetesRecibidos($dcn$, sinUno($vecinasPc$), $c$)
		ELSE
			paquetesRecibidos($dcn$, sinUno($vecinasPc$), $c$)
		FI
	}
	\tadAxioma{maxPrioridad($dcn$, $cp$)}{
		\IF $\emptyset$?(sinUno($cp$)) THEN
			darPrioridad($dcn$, dameUno($cp$)
		ELSE
			max(darPrioridad($dcn$, dameUno($cp$), \\
			maxPrioridad($dcn$, sinUno($cp$)))
		FI
	}

	\tadAxioma{paquetesConPrioridadK($dcn$, $cp$, $k$)}{
		\IF $\emptyset$?($cp$) THEN
			$\emptyset$
		ELSE{
			\IF darPrioridad($dcn$, dameUno($cp$)) = $k$ THEN
				 Ag(dameUno($cp$), paquetesConPrioridadK
				($dcn$, sinUno($cp$), $k$))
			ELSE
				paquetesConPrioridadK($dcn$, sinUno($cp$), $k$)
			FI
			}
		FI
	}

	\tadAxioma{compuQueMasEnvio($dcn$)}{dameUno(enviaronK($dcn$, compus(topo($dcn$)), \\
											maxEnviado($dcn$, compus(topo($dcn$))) ))}

	\tadAxioma{maxEnviado($dcn$, $cc$)}{
		\IF $\emptyset$?(sinUno($cc$)) THEN
			\#enviados($dcn$, dameUno($cc$))
		ELSE
			max(\#enviados($dcn$, dameUno($cc$), \\
			maxEnviado($dcn$, sinUno($cc$)))
		FI
	}

	\tadAxioma{enviaronK($dcn$, $cc$, $k$)}{
		\IF $\emptyset$?($cc$) THEN
			$\emptyset$
		ELSE{
			\IF \#enviados(dcn, dameUno($cc$)) = $k$ THEN
				 Ag(dameUno($cc$), enviaronK($dcn$, sinUno($cc$), $k$))
			ELSE
				enviaronK($dcn$, sinUno($cc$), $k$)
			FI
			}
		FI
	}



\end{tad}
